<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Create Post - T4L</title>
  <link rel="icon" type="image/png" href="/images/favicon.png" />
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css">
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
      
      * {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      }

      .post-type-card {
        transition: all 0.3s ease;
      }
      
      .post-type-card.active {
        border-color: #4b0d7f;
        color: white;
        background: linear-gradient(135deg, #4b0d7f 0%, #6b1fa0 100%);
        transform: translateY(-4px);
        box-shadow: 0 12px 24px rgba(75, 13, 127, 0.3);
      }
      
      .post-type-card.active .icon-bg {
        background: rgba(255, 255, 255, 0.2);
      }
      
      .post-type-card.active svg {
        color: white;
      }
      
      .post-type-card.active span {
        color: white;
      }
      
      .post-type-card:hover:not(.active) {
        transform: translateY(-2px);
        border-color: #a855f7;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
      }
      
      .lift-checkbox {
        transition: all 0.3s ease;
      }
      
      .lift-checkbox.selected {
        border-color: #4b0d7f;
        background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%);
      }
      
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      .fade-in {
        animation: fadeIn 0.5s ease-out forwards;
      }

      /* Smooth hide/show animation for location field */
      .location-field {
        transition: all 0.3s ease;
        overflow: hidden;
      }

      .location-field.hidden {
        max-height: 0;
        opacity: 0;
        margin: 0;
        padding: 0;
        pointer-events: none;
      }

      /* Notification animations */
      @keyframes slideIn {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes fadeOut {
        from {
          opacity: 1;
        }
        to {
          opacity: 0;
        }
      }
      
      @keyframes pulse {
        0%, 100% {
          transform: scale(1);
          box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
        }
        50% {
          transform: scale(1.01);
          box-shadow: 0 0 0 8px rgba(239, 68, 68, 0);
        }
      }

      .animate-slideIn {
        animation: slideIn 0.4s cubic-bezier(0.16, 1, 0.3, 1);
      }
      
      .error-highlight {
        border: 2px solid #f59e0b !important;
        background-color: #fffbeb !important;
        animation: pulse 0.5s ease-in-out 2;
      }

      /* Custom date picker styling */
      .custom-datepicker {
        color: #374151;
      }
      
      .custom-datepicker::-webkit-calendar-picker-indicator {
        background: transparent;
        bottom: 0;
        color: transparent;
        cursor: pointer;
        height: auto;
        left: 0;
        position: absolute;
        right: 0;
        top: 0;
        width: auto;
      }
      
      .custom-datepicker:focus {
        border-color: #8b5cf6;
        box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
      }
      
      /* Purple submit button styling */
      .purple-submit {
        background: linear-gradient(135deg, #4b0d7f 0%, #6b1fa0 100%);
        color: white;
        box-shadow: 0 4px 12px rgba(75, 13, 127, 0.4);
        transition: all 0.3s ease;
      }
      
      .purple-submit:hover {
        background: linear-gradient(135deg, #5a1a8f 0%, #7a2ab0 100%);
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(75, 13, 127, 0.5);
      }
      
      .purple-submit:active {
        transform: translateY(0);
        box-shadow: 0 2px 8px rgba(75, 13, 127, 0.4);
      }

      /* Sidebar Styles */
      .sidebar {
        width: 80px;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        box-shadow: 0 4px 24px rgba(0, 0, 0, 0.06);
        border-right: 1px solid rgba(0, 0, 0, 0.06);
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 2rem 0;
        position: fixed;
        height: 100vh;
        left: 0;
        top: 0;
        z-index: 40;
      }

      .sidebar-logo {
        margin-bottom: 2rem;
      }

      .logo-badge {
        background: linear-gradient(135deg, #4b0d7f 0%, #6b1fa1 100%);
        color: white;
        padding: 0.75rem 1rem;
        border-radius: 1rem;
        font-weight: 700;
        font-size: 0.875rem;
        box-shadow: 0 10px 25px rgba(75, 13, 127, 0.35);
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .logo-badge:hover {
        transform: scale(1.05);
        box-shadow: 0 12px 30px rgba(75, 13, 127, 0.45);
      }

      .sidebar-nav {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        width: 100%;
        padding: 0 0.75rem;
      }

      .sidebar-link {
        display: flex;
        flex-direction: column;
        align-items: center;
        cursor: pointer;
        padding: 0.875rem 0.75rem;
        border-radius: 1rem;
        transition: all 0.3s ease;
        position: relative;
      }

      .sidebar-link::before {
        content: '';
        position: absolute;
        left: -12px;
        top: 50%;
        transform: translateY(-50%);
        width: 4px;
        height: 0;
        background: linear-gradient(180deg, #4b0d7f 0%, #6b1fa1 100%);
        border-radius: 0 4px 4px 0;
        transition: height 0.3s ease;
      }

      .sidebar-link.active::before {
        height: 36px;
      }

      .sidebar-link:hover {
        background: rgba(75, 13, 127, 0.08);
      }

      .sidebar-link.active {
        background: rgba(75, 13, 127, 0.08);
      }

      .sidebar-link i {
        font-size: 1.5rem;
        color: #6b7280;
        transition: all 0.3s ease;
      }

      .sidebar-link:hover i {
        color: #4b0d7f;
        transform: scale(1.1);
      }

      .sidebar-link.active i {
        color: #4b0d7f;
      }

      .sidebar-link span {
        font-size: 9px;
        margin-top: 0.5rem;
        font-weight: 700;
        color: #6b7280;
        transition: color 0.3s ease;
      }

      .sidebar-link:hover span {
        color: #4b0d7f;
      }

      .sidebar-link.active span {
        color: #4b0d7f;
      }

      .sidebar-logout {
        margin-top: auto;
      }

      .sidebar-logout:hover {
        background: rgba(220, 38, 38, 0.08);
      }

      .sidebar-logout:hover i {
        color: #dc2626;
      }

      .sidebar-logout:hover span {
        color: #dc2626;
      }

      /* Mobile Toggle Button */
      .sidebar-toggle {
        display: none;
      }

      @media (max-width: 768px) {
        .sidebar-toggle {
          display: flex;
          position: fixed;
          top: 1rem;
          left: 1rem;
          z-index: 50;
          background: linear-gradient(135deg, #4b0d7f 0%, #6b1fa1 100%);
          color: white;
          border-radius: 14px;
          width: 48px;
          height: 48px;
          align-items: center;
          justify-content: center;
          box-shadow: 0 10px 25px rgba(75, 13, 127, 0.35);
          border: none;
          cursor: pointer;
        }

        .sidebar {
          transform: translateX(-100%);
          transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .sidebar.active {
          transform: translateX(0);
        }

        .overlay {
          display: none;
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background-color: rgba(0, 0, 0, 0.6);
          backdrop-filter: blur(8px);
          z-index: 30;
        }

        .overlay.active {
          display: block;
        }
      }

      /* Error styling */
      .field-error {
        animation: slideIn 0.3s ease-out;
      }

      .error-highlight {
        border-color: #dc2626 !important;
        box-shadow: 0 0 0 2px rgba(220, 38, 38, 0.2) !important;
      }
    </style>
  </head>
  <body class="bg-gray-50 font-sans">
    <!-- Global Notification Script -->
    <script src="/js/notifications.js"></script>
    <div class="flex min-h-screen">
      <!-- Mobile Toggle Button -->
      <button class="sidebar-toggle" id="sidebarToggle">
        <i class="bx bx-menu" style="font-size: 1.5rem;"></i>
      </button>

      <!-- Overlay for mobile -->
      <div class="overlay" id="overlay"></div>

      <!-- Sidebar -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-logo">
          <div class="logo-badge">T4L</div>
        </div>

        <nav class="sidebar-nav">
          <a href="/partner-dashboard.html" class="sidebar-link">
            <i class="bx bxs-home"></i>
            <span>Home</span>
          </a>

          <a href="/creat-Post.html" class="sidebar-link active">
            <i class="bx bx-plus-circle"></i>
            <span>Create Post</span>
          </a>

          <a href="/my-services.html" class="sidebar-link">
            <i class="bx bx-briefcase-alt-2"></i>
            <span>Services</span>
          </a>

          <a href="/applications.html" class="sidebar-link">
            <i class="bx bx-file"></i>
            <span>Applications</span>
          </a>

          <a href="#" onclick="alert('Impact Log is coming soon ‚Äî available in 1 month!'); return false;" class="sidebar-link" style="opacity:0.5; cursor:not-allowed;">
            <i class="bx bx-line-chart"></i>
            <span>Impact Log <span style="font-size:9px;background:#fef3c7;color:#92400e;padding:1px 6px;border-radius:8px;margin-left:4px;">Soon</span></span>
          </a>

          <a href="/chat-pillar-partner.html" class="sidebar-link">
            <i class="bx bxs-group"></i>
            <span>T4L Ecosysem</span>
          </a>

          <a href="https://www.t4leader.com/event" class="sidebar-link" target="_blank" rel="noopener noreferrer">
            <i class="bx bx-calendar-event"></i>
            <span>Events</span>
          </a>

          <a href="/profile-partner.html" class="sidebar-link">
            <i class="bx bx-user"></i>
            <span>Profile</span>
          </a>

          <div id="logoutBtn" class="sidebar-link sidebar-logout">
            <i class="bx bx-log-out"></i>
            <span>Logout</span>
          </div>
        </nav>
      </aside>

      <!-- Main Content -->
      <main class="flex-1 ml-0 md:ml-20 p-4 sm:p-6 md:p-8 lg:p-10">
        <!-- Header -->
        <header class="flex items-center justify-between mb-6 md:mb-8">
          <div class="flex items-center gap-3">
            <div>
              <h1 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-1">Create a Post</h1>
              <p class="text-sm md:text-base text-gray-600 hidden sm:block">Share opportunities with the T4L community</p>
            </div>
          </div>
          
          <div class="flex items-center gap-2 md:gap-4">
            <!-- Search - Hidden on mobile -->
            <div class="relative hidden md:block">
              <input
                type="text"
                placeholder="Search articles, posts..."
                class="border border-gray-300 rounded-full pl-10 pr-4 py-2 text-sm w-48 lg:w-64 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
              />
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 absolute left-3 top-2.5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
              </svg>
            </div>
            
            <button class="relative p-2 hover:bg-gray-100 rounded-full transition-colors">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:h-6 md:w-6 text-gray-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
              </svg>
              <span class="absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"></span>
            </button>
            
            <div class="w-8 h-8 md:w-10 md:h-10 bg-gradient-to-br from-[#4b0d7f] to-[#6b1fa0] flex items-center justify-center rounded-full font-bold text-white text-sm cursor-pointer hover:shadow-lg transition-shadow">
              DL
            </div>
          </div>
        </header>

        <!-- Form Content -->
        <form id="postForm" class="form-container bg-white rounded-2xl md:rounded-3xl shadow-lg p-5 sm:p-6 md:p-8 lg:p-10 fade-in">
          <!-- Post Type Section -->
          <div class="mb-6 md:mb-8">
            <label class="block text-base md:text-lg font-bold text-gray-900 mb-3 md:mb-4">
              Post Type <span class="text-red-500">*</span>
            </label>
            <div class="grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4">
              <!-- Speaking Card -->
              <div class="post-type-card bg-white border border-purple-200 rounded-xl md:rounded-2xl p-4 md:p-6 cursor-pointer flex flex-col items-center justify-center hover:border-purple-400" onclick="selectPostType(this, 'speaking')">
                <div class="icon-bg w-12 h-12 md:w-16 md:h-16 bg-purple-50 rounded-lg md:rounded-xl flex items-center justify-center mb-2 md:mb-3">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 md:h-8 md:w-8 text-purple-600" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                  </svg>
                </div>
                <span class="font-semibold text-sm md:text-base text-gray-900">Speaking</span>
                <!-- Removed required: we'll validate postType via custom JS -->
                <input type="radio" name="postType" value="speaking" class="hidden">
              </div>

              <!-- Podcast Card -->
              <div class="post-type-card bg-white border border-amber-200 rounded-xl md:rounded-2xl p-4 md:p-6 cursor-pointer flex flex-col items-center justify-center hover:border-amber-400" onclick="selectPostType(this, 'podcast')">
                <div class="icon-bg w-12 h-12 md:w-16 md:h-16 bg-amber-50 rounded-lg md:rounded-xl flex items-center justify-center mb-2 md:mb-3">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 md:h-8 md:w-8 text-amber-600" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                    <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
                  </svg>
                </div>
                <span class="font-semibold text-sm md:text-base text-gray-900">Podcast</span>
                <input type="radio" name="postType" value="podcast" class="hidden">
              </div>

              <!-- Webinar Card -->
              <div class="post-type-card bg-white border border-sky-200 rounded-xl md:rounded-2xl p-4 md:p-6 cursor-pointer flex flex-col items-center justify-center hover:border-sky-400" onclick="selectPostType(this, 'webinar')">
                <div class="icon-bg w-12 h-12 md:w-16 md:h-16 bg-sky-50 rounded-lg md:rounded-xl flex items-center justify-center mb-2 md:mb-3">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 md:h-8 md:w-8 text-sky-600" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M21 3H3c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L23 5c0-1.11-.9-2-2-2zm0 14H3V5h18v12z"/>
                    <path d="M9 8l7 4-7 4z"/>
                  </svg>
                </div>
                <span class="font-semibold text-sm md:text-base text-gray-900">Webinar</span>
                <input type="radio" name="postType" value="webinar" class="hidden">
              </div>

              <!-- Volunteering Card -->
              <div class="post-type-card bg-white border border-purple-200 rounded-xl md:rounded-2xl p-4 md:p-6 cursor-pointer flex flex-col items-center justify-center hover:border-purple-400" onclick="selectPostType(this, 'volunteering')">
                <div class="icon-bg w-12 h-12 md:w-16 md:h-16 bg-purple-50 rounded-lg md:rounded-xl flex items-center justify-center mb-2 md:mb-3">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 md:h-8 md:w-8 text-purple-600" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                  </svg>
                </div>
                <span class="font-semibold text-sm md:text-base text-gray-900">Volunteering</span>
                <input type="radio" name="postType" value="volunteering" class="hidden">
              </div>
            </div>
          </div>

          <!-- Title Input -->
          <div class="mb-6 md:mb-8">
            <label class="block text-base md:text-lg font-bold text-gray-900 mb-2 md:mb-3">
              Title <span class="text-red-500">*</span>
            </label>
            <input
              type="text"
              name="title"
              placeholder="Give your post a compelling title"
              class="w-full px-4 py-3 md:px-5 md:py-4 border-2 border-gray-200 rounded-xl text-sm md:text-base focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"
              required
            />
          </div>

          <!-- Description Textarea -->
          <div class="mb-6 md:mb-8">
            <label class="block text-base md:text-lg font-bold text-gray-900 mb-2 md:mb-3">
              Description <span class="text-red-500">*</span>
            </label>
            <textarea
              name="description"
              placeholder="Describe what you're looking for in an ambassador ...."
              rows="6"
              class="w-full px-4 py-3 md:px-5 md:py-4 border-2 border-gray-200 rounded-xl text-sm md:text-base focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all resize-none md:rows-8"
              required
            ></textarea>
            <p class="text-xs md:text-sm text-gray-500 mt-2">Be specific about the opportunity, requirements, and benefits</p>
          </div>

          <!-- Format Dropdown -->
          <div class="mb-6 md:mb-8">
            <label class="block text-base md:text-lg font-bold text-gray-900 mb-2 md:mb-3">
              Format <span class="text-red-500">*</span>
            </label>
            <div class="relative">
              <select id="formatSelect" name="format" class="w-full px-4 py-3 md:px-5 md:py-4 border-2 border-gray-200 rounded-xl text-sm md:text-base appearance-none cursor-pointer focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white transition-all" required onchange="handleFormatChange(this.value)">
                <option value="">Select a format</option>
                <option value="in-person">In-Person</option>
                <option value="virtual">Virtual</option>
                <option value="hybrid">Hybrid</option>
              </select>
              <svg class="absolute right-4 md:right-5 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-500 pointer-events-none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
              </svg>
            </div>
          </div>

          <!-- Location Dropdown - CONDITIONAL (Hidden when virtual is selected) -->
          <div id="locationField" class="location-field mb-6 md:mb-8" style="display: block;">
            <label class="block text-base md:text-lg font-bold text-gray-900 mb-2 md:mb-3">
              Location
            </label>
            <div class="relative">
              <select id="locationSelect" name="location" class="w-full px-4 py-3 md:px-5 md:py-4 border-2 border-gray-200 rounded-xl text-sm md:text-base appearance-none cursor-pointer focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white transition-all">
                <option value="">Select a location</option>
                <option value="Austin, Texas">Austin, Texas</option>
                <option value="New York, NY">New York, NY</option>
                <option value="San Francisco, CA">San Francisco, CA</option>
                <option value="Chicago, IL">Chicago, IL</option>
                <option value="Boston, MA">Boston, MA</option>
                <option value="Remote" id="locationOptionRemote">Remote</option>
                <option value="other">Other (enter city)</option>
              </select>
              <svg class="absolute right-4 md:right-5 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-500 pointer-events-none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
              </svg>
            </div>
            <!-- Custom location when "Other" is selected -->
            <div id="locationOtherWrapper" class="mt-3 hidden">
              <input
                type="text"
                id="locationOtherInput"
                name="locationOther"
                class="w-full px-4 py-3 md:px-5 md:py-4 border-2 border-gray-200 rounded-xl text-sm md:text-base focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"
                placeholder="Enter your city and country (e.g. Lagos, Nigeria)"
              />
            </div>
          </div>

          <!-- Deadline Input with Calendar -->
          <div class="mb-6 md:mb-8">
            <label class="block text-base md:text-lg font-bold text-gray-900 mb-2 md:mb-3">
              Deadline <span class="text-red-500">*</span>
            </label>
            <div class="relative">
              <input
                type="date"
                name="deadline"
                class="w-full px-4 py-3 md:px-5 md:py-4 border-2 border-gray-200 rounded-xl text-sm md:text-base focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all custom-datepicker"
                required
              />
              <div class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
              </div>
            </div>
            <p class="text-xs md:text-sm text-gray-500 mt-2">Click the calendar icon to select a date</p>
            <div id="datePreview" class="text-sm text-blue-00 mt-2 hidden">
              Selected: <span id="selectedDate" class="font-semibold"></span>
            </div>
          </div>

          <!-- LIFT Pillars Section -->
          <div class="mb-8 md:mb-10">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-3 md:mb-4 gap-2">
              <label class="block text-base md:text-lg font-bold text-gray-900">
                LIFT Pillars <span class="text-red-500">*</span>
              </label>
              <button 
                type="button"
                onclick="selectAllLift()"
                class="text-sm font-semibold text-purple-600 hover:text-purple-700 transition-colors flex items-center gap-2"
              >
                <input type="checkbox" id="selectAllCheckbox" class="w-4 h-4 text-purple-600 rounded focus:ring-2 focus:ring-purple-500" />
                <span>Select All</span>
              </button>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4">
              <!-- Leading Self -->
              <div class="lift-checkbox border-2 border-gray-200 rounded-xl p-4 md:p-5 cursor-pointer hover:border-purple-300 transition-all" onclick="toggleLift(this)">
                <div class="flex items-center">
                  <input type="checkbox" name="liftPillars" value="Leading Self" class="w-4 h-4 md:w-5 md:h-5 text-purple-600 rounded focus:ring-2 focus:ring-purple-500 mr-3 md:mr-4" />
                  <span class="font-semibold text-sm md:text-base text-gray-900">Leading Self</span>
                </div>
              </div>

              <!-- Innovation & Technology -->
              <div class="lift-checkbox border-2 border-gray-200 rounded-xl p-4 md:p-5 cursor-pointer hover:border-purple-300 transition-all" onclick="toggleLift(this)">
                <div class="flex items-center">
                  <input type="checkbox" name="liftPillars" value="Innovation & Technology" class="w-4 h-4 md:w-5 md:h-5 text-purple-600 rounded focus:ring-2 focus:ring-purple-500 mr-3 md:mr-4" />
                  <span class="font-semibold text-sm md:text-base text-gray-900">Innovation & Technology</span>
                </div>
              </div>

              <!-- Fostering Teams -->
              <div class="lift-checkbox border-2 border-gray-200 rounded-xl p-4 md:p-5 cursor-pointer hover:border-purple-300 transition-all" onclick="toggleLift(this)">
                <div class="flex items-center">
                  <input type="checkbox" name="liftPillars" value="Fostering Teams" class="w-4 h-4 md:w-5 md:h-5 text-purple-600 rounded focus:ring-2 focus:ring-purple-500 mr-3 md:mr-4" />
                  <span class="font-semibold text-sm md:text-base text-gray-900">Fostering Teams</span>
                </div>
              </div>

              <!-- Transforming Business -->
              <div class="lift-checkbox border-2 border-gray-200 rounded-xl p-4 md:p-5 cursor-pointer hover:border-purple-300 transition-all" onclick="toggleLift(this)">
                <div class="flex items-center">
                  <input type="checkbox" name="liftPillars" value="Transforming Business" class="w-4 h-4 md:w-5 md:h-5 text-purple-600 rounded focus:ring-2 focus:ring-purple-500 mr-3 md:mr-4" />
                  <span class="font-semibold text-sm md:text-base text-gray-900">Transforming Business</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Submit Button -->
          <div class="flex justify-center pt-4 md:pt-6">
            <button type="submit" class="purple-submit w-full sm:w-auto px-12 md:px-16 py-3 md:py-4 rounded-xl font-bold text-base md:text-lg">
              Post
            </button>
          </div>
        </form>
      </main>
    </div>

    <script>
      let selectedPostType = null;

      // Mobile sidebar toggle functionality
      const sidebarToggle = document.getElementById('sidebarToggle');
      const sidebar = document.getElementById('sidebar');
      const overlay = document.getElementById('overlay');

      sidebarToggle.addEventListener('click', () => {
        sidebar.classList.toggle('active');
        overlay.classList.toggle('active');
      });

      overlay.addEventListener('click', () => {
        sidebar.classList.remove('active');
        overlay.classList.remove('active');
      });

      // Sidebar link click functionality
      document.querySelectorAll('.sidebar-link').forEach(link => {
        link.addEventListener('click', function() {
          document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
          this.classList.add('active');
          
          if (window.innerWidth <= 768) {
            sidebar.classList.remove('active');
            overlay.classList.remove('active');
          }
        });
      });

      // NEW: Handle format change to show/hide location and Remote option
      function handleFormatChange(format) {
        const locationField = document.getElementById('locationField');
        const locationSelect = document.getElementById('locationSelect');
        const locationOtherWrapper = document.getElementById('locationOtherWrapper');
        const locationOtherInput = document.getElementById('locationOtherInput');
        const remoteOption = document.getElementById('locationOptionRemote');
        
        console.log('Format changed to:', format); // Debug
        
        // When In-Person: hide "Remote" from Location (it doesn't make sense)
        if (remoteOption) {
          if (format === 'in-person') {
            remoteOption.hidden = true;
            remoteOption.disabled = true;
            if (locationSelect && locationSelect.value === 'Remote') {
              locationSelect.value = '';
            }
          } else {
            remoteOption.hidden = false;
            remoteOption.disabled = false;
          }
        }
        
        if (format === 'virtual') {
          // For virtual, location is still required but will be auto-set to "Remote"
          locationField.classList.remove('hidden');
          locationField.style.display = 'block';
          if (locationSelect) {
            const remoteOpt = Array.from(locationSelect.options).find(opt => 
              opt.value.toLowerCase().includes('remote') || opt.text.toLowerCase().includes('remote')
            );
            if (remoteOpt && !remoteOpt.disabled) {
              locationSelect.value = remoteOpt.value;
            } else {
              const otherOption = Array.from(locationSelect.options).find(opt => opt.value === 'other');
              if (otherOption) {
                locationSelect.value = 'other';
                if (locationOtherInput) {
                  locationOtherInput.value = 'Remote';
                  locationOtherWrapper.classList.remove('hidden');
                }
              }
            }
          }
        } else {
          // SHOW location field for in-person or hybrid
          locationField.classList.remove('hidden');
          locationField.style.display = 'block';
        }

        // Clear format error if any
        const formatSelect = document.querySelector('select[name="format"]');
        if (formatSelect) {
          formatSelect.classList.remove('error-highlight');
          const errorElement = formatSelect.closest('.mb-6, .mb-8')?.querySelector('.field-error');
          if (errorElement) errorElement.remove();
        }
      }

      // Post Type selection: ensure radio state matches the visual card state
      function selectPostType(element, type) {
        console.log('üéØ Post type clicked:', type);
        
        // Remove active class from ALL cards and uncheck ALL radios
        document.querySelectorAll('.post-type-card').forEach(card => {
          card.classList.remove('active');
          const radio = card.querySelector('input[type="radio"]');
          if (radio) {
            radio.checked = false;
          }
        });
        
        // Add active class to THIS card
        element.classList.add('active');
        selectedPostType = type;
        
        // Check THIS radio button
        const radioInput = element.querySelector('input[type="radio"]');
        if (radioInput) {
          radioInput.checked = true;
          console.log('‚úÖ Radio checked:', radioInput.value, 'Checked?', radioInput.checked);
        } else {
          console.error('‚ùå Radio button not found in post-type card!');
        }
        
        // Clear any existing error UI
        clearPostTypeError();
        
        // Debug verification to be sure a radio is checked
        setTimeout(() => {
          const checked = document.querySelector('input[name="postType"]:checked');
          console.log('üîç Verification:', checked ? `‚úÖ ${checked.value}` : '‚ùå NOT CHECKED');
        }, 50);
      }

      function toggleLift(element) {
        const checkbox = element.querySelector('input[type="checkbox"]');
        checkbox.checked = !checkbox.checked;
        
        if (checkbox.checked) {
          element.classList.add('selected');
        } else {
          element.classList.remove('selected');
        }
        
        updateSelectAllCheckbox();
        clearLiftPillarsError();
      }

      function selectAllLift() {
        const selectAllCheckbox = document.getElementById('selectAllCheckbox');
        const liftCheckboxes = document.querySelectorAll('.lift-checkbox');
        
        liftCheckboxes.forEach(box => {
          const checkbox = box.querySelector('input[type="checkbox"]');
          checkbox.checked = selectAllCheckbox.checked;
          
          if (selectAllCheckbox.checked) {
            box.classList.add('selected');
          } else {
            box.classList.remove('selected');
          }
        });

        clearLiftPillarsError();
      }

      function updateSelectAllCheckbox() {
        const selectAllCheckbox = document.getElementById('selectAllCheckbox');
        const liftCheckboxes = document.querySelectorAll('.lift-checkbox input[type="checkbox"]');
        const allChecked = Array.from(liftCheckboxes).every(cb => cb.checked);
        
        selectAllCheckbox.checked = allChecked;
      }

      function showSuccessNotification(message) {
        const notification = document.createElement('div');
        notification.className = 'fixed top-4 right-4 bg-white rounded-xl shadow-2xl p-6 max-w-md z-[200] animate-slideIn';
        notification.style.animation = 'slideIn 0.4s cubic-bezier(0.16, 1, 0.3, 1)';
        notification.innerHTML = `
          <div class="flex items-start gap-4">
            <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
              </svg>
            </div>
            <div class="flex-1">
              <h4 class="font-bold text-gray-900 text-lg mb-1">Success!</h4>
              <p class="text-gray-600 text-sm leading-relaxed">${message}</p>
            </div>
            <button onclick="this.parentElement.parentElement.remove()" class="text-gray-400 hover:text-gray-600 transition-colors">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>
        `;
        
        document.body.appendChild(notification);
        
        setTimeout(() => {
          notification.style.animation = 'fadeOut 0.3s ease-out';
          setTimeout(() => notification.remove(), 300);
        }, 5000);
      }

      function showErrorNotification(message) {
        // Popup disabled - inline error messages are shown instead
        console.log('Error (popup disabled):', message);
        return;
      }

      function validateForm() {
        let isValid = true;
        const errors = [];

        const formData = new FormData(document.getElementById('postForm'));
        const title = formData.get('title').trim();
        const description = formData.get('description').trim();
        const format = formData.get('format');
        const deadline = formData.get('deadline').trim();
        const locationSelectValue = formData.get('location');
        const locationOther = formData.get('locationOther')?.trim() || '';
        
        const postTypeRadio = document.querySelector('input[name="postType"]:checked');
        const postType = postTypeRadio ? postTypeRadio.value : null;
        
        const liftPillars = [];
        document.querySelectorAll('.lift-checkbox input[type="checkbox"]:checked').forEach(checkbox => {
            liftPillars.push(checkbox.value);
        });

        clearErrorHighlights();

        if (!postType) {
            console.log('Post Type is missing!');
            errors.push('Post type is required');
            highlightPostTypeError();
            isValid = false;
        } else {
            console.log('Post Type selected:', postType);
        }

        if (!title) {
            errors.push('Please enter a title for your post');
            highlightFieldError('input[name="title"]', 'Please enter a title');
            isValid = false;
        } else if (title.length < 5) {
            errors.push('Title should be at least 5 characters long');
            highlightFieldError('input[name="title"]', 'Title should be at least 5 characters long');
            isValid = false;
        }

        if (!description) {
            errors.push('Please enter a description for your post');
            highlightFieldError('textarea[name="description"]', 'Please enter a description');
            isValid = false;
        } else if (description.length < 50) {
            errors.push('Description should be at least 50 characters long');
            highlightFieldError('textarea[name="description"]', 'Description should be at least 50 characters long');
            isValid = false;
        }

        if (!format) {
            errors.push('Please select a format for your post');
            highlightFieldError('select[name="format"]', 'Please select a format');
            isValid = false;
        }

        if (!deadline) {
            errors.push('Please select a deadline date');
            highlightFieldError('input[name="deadline"]', 'Please select a deadline date');
            isValid = false;
        } else {
            const selectedDate = new Date(deadline);
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            if (selectedDate < today) {
                errors.push('Please select a future date for the deadline');
                highlightFieldError('input[name="deadline"]', 'Please select a future date');
                isValid = false;
            }
        }

        // ‚úÖ Require location for all formats (virtual can be "Remote" or "Virtual")
        const finalLocation = format === 'virtual' 
          ? 'Remote' // Auto-set for virtual, but still require it
          : (locationSelectValue === 'other' ? locationOther : locationSelectValue);
        
        if (!finalLocation || finalLocation.trim() === '') {
            errors.push('Location is required. For virtual events, use "Remote" or "Virtual".');
            if (format === 'virtual') {
              // For virtual, we'll auto-set it, but show the error
              highlightFieldError('select[name="format"]', 'Location will be set to "Remote" for virtual events');
            } else {
              highlightFieldError('select[name="location"]', 'Please select or enter a location');
            }
            isValid = false;
        }

        if (liftPillars.length === 0) {
            errors.push('Please select at least one LIFT pillar');
            highlightLiftPillarsError();
            isValid = false;
        }

        if (errors.length > 0) {
            console.log('‚ùå Validation failed with errors:', errors);
            showValidationErrors(errors);
            // Scroll to top to ensure user sees the error
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        return isValid;
      }

      function highlightPostTypeError() {
          console.log('üî¥ Highlighting post type error...');
          
          const postTypeCards = document.querySelectorAll('.post-type-card');
          postTypeCards.forEach(card => {
              card.classList.add('error-highlight');
              card.style.border = '2px solid #f59e0b';
              card.style.backgroundColor = '#fffbeb';
          });
          
          // Find the post type section - look for the label containing "Post Type"
          const postTypeLabel = Array.from(document.querySelectorAll('label')).find(label => 
            label.textContent.includes('Post Type')
          );
          const postTypeSection = postTypeLabel ? postTypeLabel.closest('.mb-6, .mb-8') || postTypeLabel.parentElement : null;
          
          if (postTypeSection) {
              console.log('‚úÖ Found post type section, scrolling to it...');
              // Scroll to the post type section
              postTypeSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
              
              // Add a pulsing animation
              postTypeSection.style.animation = 'pulse 0.5s ease-in-out 3';
              
              let errorElement = postTypeSection.querySelector('.field-error');
              if (!errorElement) {
                  errorElement = document.createElement('div');
                  errorElement.className = 'field-error text-gray-700 text-sm mt-2 p-2 bg-amber-50 border border-amber-200 rounded flex items-center gap-2';
                  errorElement.innerHTML = `
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-amber-600 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor">
                          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                      </svg>
                      <span class="text-gray-700 text-sm">Please select a post type</span>
                  `;
                  postTypeSection.appendChild(errorElement);
                  console.log('‚úÖ Error message added below post type section');
              }
          } else {
              console.error('‚ùå Could not find post type section!');
          }
      }

      function highlightFieldError(selector, message) {
          const field = document.querySelector(selector);
          if (field) {
              field.classList.add('error-highlight');
              
              const fieldContainer = field.closest('.mb-6, .mb-8');
              let errorElement = fieldContainer.querySelector('.field-error');
              if (!errorElement) {
                  errorElement = document.createElement('div');
                  errorElement.className = 'field-error text-red-600 text-sm mt-2 flex items-center gap-1';
                  
                  errorElement.innerHTML = `
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                      </svg>
                      <span>${message}</span>
                  `;
                  fieldContainer.appendChild(errorElement);
              }
          }
      }

      function highlightLiftPillarsError() {
          const liftCheckboxes = document.querySelectorAll('.lift-checkbox');
          liftCheckboxes.forEach(box => {
              box.classList.add('error-highlight');
          });
          
          const liftSection = document.querySelector('.mb-8.md\\:mb-10');
          let errorElement = liftSection.querySelector('.field-error');
          if (!errorElement) {
              errorElement = document.createElement('div');
              errorElement.className = 'field-error text-red-600 text-sm mt-2 flex items-center gap-1';
              errorElement.innerHTML = `
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                      <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                  </svg>
                  <span>Please select at least one LIFT pillar</span>
              `;
              liftSection.appendChild(errorElement);
          }
      }

      function clearPostTypeError() {
          document.querySelectorAll('.post-type-card').forEach(card => {
              card.classList.remove('error-highlight');
          });
          const errorElement = document.querySelector('.mb-6.md\\:mb-8 .field-error');
          if (errorElement) errorElement.remove();
      }

      function clearLiftPillarsError() {
          document.querySelectorAll('.lift-checkbox').forEach(box => {
              box.classList.remove('error-highlight');
          });
          const errorElement = document.querySelector('.mb-8.md\\:mb-10 .field-error');
          if (errorElement) errorElement.remove();
      }

      function clearErrorHighlights() {
          document.querySelectorAll('.post-type-card').forEach(card => {
              card.classList.remove('error-highlight');
          });
          
          document.querySelectorAll('input, textarea, select').forEach(field => {
              field.classList.remove('error-highlight');
          });
          
          document.querySelectorAll('.lift-checkbox').forEach(box => {
              box.classList.remove('error-highlight');
          });
          
          document.querySelectorAll('.field-error').forEach(error => error.remove());
      }

      function showValidationErrors(errors) {
          // Check if post type error is in the list
          const hasPostTypeError = errors.some(err => err.toLowerCase().includes('post type'));
          
          let errorMessage;
          if (hasPostTypeError && errors.length === 1) {
              // One-liner for post type only
              errorMessage = 'Select a post type.';
          } else if (hasPostTypeError) {
              // Post type + other errors - concise
              const otherErrors = errors.filter(err => !err.toLowerCase().includes('post type'));
              const otherText = otherErrors.length > 0 ? ` Also: ${otherErrors.map(e => e.replace(/‚ö†Ô∏è\s*/g, '').split('.')[0]).join(', ')}.` : '';
              errorMessage = `Select a post type.${otherText}`;
          } else {
              // Other errors only - concise
              const errorList = errors.map(error => error.replace(/‚ö†Ô∏è\s*/g, '').split('.')[0]).join(', ');
              errorMessage = `Please fix: ${errorList}.`;
          }
          
          showErrorNotification(errorMessage);
      }

      document.addEventListener('DOMContentLoaded', function() {
        // Sync Location "Remote" option with Format (hide Remote when In-Person is selected)
        const formatSelect = document.getElementById('formatSelect');
        if (formatSelect && typeof handleFormatChange === 'function') {
          handleFormatChange(formatSelect.value || '');
        }
        
        const deadlineInput = document.querySelector('input[name="deadline"]');
        const datePreview = document.getElementById('datePreview');
        const selectedDateSpan = document.getElementById('selectedDate');
        
        if (deadlineInput) {
          const today = new Date().toISOString().split('T')[0];
          deadlineInput.min = today;
          
          deadlineInput.setAttribute('pattern', '[0-9]{4}-[0-9]{2}-[0-9]{2}');
          deadlineInput.setAttribute('title', 'Please select a future date');
          
          deadlineInput.addEventListener('change', function() {
            if (this.value) {
              const formattedDate = new Date(this.value).toLocaleDateString('en-US', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
              });
              if (selectedDateSpan) {
                selectedDateSpan.textContent = formattedDate;
                datePreview.classList.remove('hidden');
              }
              this.classList.remove('error-highlight');
              const errorElement = this.closest('.mb-6, .mb-8')?.querySelector('.field-error');
              if (errorElement) errorElement.remove();
            } else {
              if (datePreview) {
                datePreview.classList.add('hidden');
              }
            }
          });
        }
        
        document.querySelectorAll('.lift-checkbox input[type="checkbox"]').forEach(checkbox => {
          checkbox.addEventListener('click', function(e) {
            e.stopPropagation();
          });
        });

        const titleInput = document.querySelector('input[name="title"]');
        if (titleInput) {
            titleInput.addEventListener('input', function() {
                if (this.value.trim()) {
                    this.classList.remove('error-highlight');
                    const errorElement = this.closest('.mb-6, .mb-8')?.querySelector('.field-error');
                    if (errorElement) errorElement.remove();
                }
            });
        }
        
        const descriptionInput = document.querySelector('textarea[name="description"]');
        if (descriptionInput) {
            descriptionInput.addEventListener('input', function() {
                if (this.value.trim()) {
                    this.classList.remove('error-highlight');
                    const errorElement = this.closest('.mb-6, .mb-8')?.querySelector('.field-error');
                    if (errorElement) errorElement.remove();
                }
            });
        }

        // Location "Other" handling
        const locationSelect = document.getElementById('locationSelect');
        const locationOtherWrapper = document.getElementById('locationOtherWrapper');
        const locationOtherInput = document.getElementById('locationOtherInput');
        if (locationSelect && locationOtherWrapper && locationOtherInput) {
          locationSelect.addEventListener('change', function () {
            if (this.value === 'other') {
              locationOtherWrapper.classList.remove('hidden');
            } else {
              locationOtherWrapper.classList.add('hidden');
              locationOtherInput.value = '';
            }
          });
        }
      });
      
      // Attach form submit handler - ensure it runs after DOM is ready
      function attachFormHandler() {
        const postForm = document.getElementById('postForm');
        if (!postForm) {
          console.error('‚ùå Form not found! Retrying...');
          setTimeout(attachFormHandler, 100);
          return;
        }
        
        console.log('‚úÖ Form found, attaching submit handler...');
        
        postForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        e.stopPropagation();
        
        console.log('üìù Form submitted, validating...');
        
        // DIRECT CHECK: Post Type must be selected FIRST
        const postTypeRadio = document.querySelector('input[name="postType"]:checked');
        const postType = postTypeRadio ? postTypeRadio.value : null;
        
        if (!postType) {
          console.log('‚ùå Post Type is missing - showing error immediately');
          
          // Show professional notification
          showErrorNotification('Please select a post type before submitting.');
          highlightPostTypeError();
          window.scrollTo({ top: 0, behavior: 'smooth' });
          return false;
        }
        
        // Now run full validation
        if (!validateForm()) {
            console.log('‚ùå Validation failed - form not submitted');
            return false;
        }
        console.log('‚úÖ Validation passed, submitting form...');
        
        const submitButton = this.querySelector('button[type="submit"]');
        
        const formData = new FormData(this);
        const title = formData.get('title').trim();
        const description = formData.get('description').trim();
        const format = formData.get('format');
        const locationSelectValue = formData.get('location');
        const locationOther = formData.get('locationOther')?.trim() || '';
        const deadline = formData.get('deadline').trim();
        
        // Post Type already checked above, use the variable we already have
        
        const liftPillars = [];
        document.querySelectorAll('.lift-checkbox input[type="checkbox"]:checked').forEach(checkbox => {
          liftPillars.push(checkbox.value);
        });
        
        // ‚úÖ Location is now required for all formats
        // - If virtual: set to "Remote" (applicants need to know it's remote)
        // - If in-person/hybrid & "other" selected: use free-text other
        // - Else: use selected predefined location
        const finalLocation =
          format === 'virtual'
            ? 'Remote' // Always set location for virtual events
            : (locationSelectValue === 'other' ? (locationOther || null) : (locationSelectValue || null));
        
        // Validate location is provided
        if (!finalLocation || finalLocation.trim() === '') {
          showErrorNotification('Location is required. Applicants need to know where the opportunity is located.');
          return;
        }

        const postData = {
            title: title,
            content: description,  // ‚úÖ Changed 'description' to 'content'
            category: postType,    // ‚úÖ Use postType from above
            format: format,
            location: finalLocation,
            deadline: deadline,
            liftPillars: liftPillars
          };
        
        submitButton.disabled = true;
        const originalText = submitButton.innerHTML;
        submitButton.innerHTML = '<span>Posting...</span>';
        
        try {
          const response = await fetch('/api/posts', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(postData)
          });
          
          const result = await response.json();
          
          if (response.ok) {
            showSuccessNotification('Your post has been published successfully!');
            
            setTimeout(() => {
              this.reset();
              
              document.querySelectorAll('.post-type-card').forEach(card => {
                card.classList.remove('active');
              });
              selectedPostType = null;
              
              document.querySelectorAll('.lift-checkbox').forEach(box => {
                box.classList.remove('selected');
              });
              document.getElementById('selectAllCheckbox').checked = false;
              
              const datePreview = document.getElementById('datePreview');
              if (datePreview) {
                datePreview.classList.add('hidden');
              }
              
              // Reset location field visibility
              const locationField = document.getElementById('locationField');
              locationField.classList.remove('hidden');
              locationField.style.display = 'block';
              
              clearErrorHighlights();
              
              submitButton.disabled = false;
              submitButton.innerHTML = originalText;
              
              setTimeout(() => {
                window.location.href = '/partner-dashboard.html?success=true';
              }, 2000);
            }, 1500);
          } else {
            showErrorNotification(result.error || 'Failed to create post. Please try again.');
            submitButton.disabled = false;
            submitButton.innerHTML = originalText;
          }
        } catch (error) {
          console.error('Error creating post:', error);
          showErrorNotification('Network error. Please check your connection and try again.');
          submitButton.disabled = false;
          submitButton.innerHTML = originalText;
        }
      });
      }
      
      // Call immediately and also on DOMContentLoaded as backup
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', attachFormHandler);
      } else {
        attachFormHandler();
      }

      // Logout functionality
      const logoutBtn = document.getElementById('logoutBtn');
      if (logoutBtn) {
        logoutBtn.addEventListener('click', function() {
          fetch('/api/logout', { method: 'POST', credentials: 'include' })
            .then(() => {
              window.location.href = '/partner-signin';
            })
            .catch(error => {
              console.error('Logout error:', error);
              window.location.href = '/partner-signin';
            });
        });
      }

      document.getElementById('selectAllCheckbox').addEventListener('change', selectAllLift);
    </script>
    <!-- Global Partner Sidebar -->
    <script src="/js/partner-sidebar.js"></script>
  <!-- Frontend auth guard: redirect if no valid session -->
  <script src="/signin.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      requireAuth('/partner-signin');
    });
  </script>
</body>
</html>